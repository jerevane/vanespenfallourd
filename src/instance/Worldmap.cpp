// Generated by dia2code
#ifndef INSTANCE__WORLDMAP__C
#define INSTANCE__WORLDMAP__C

#include "Worldmap.h"
#include "../state.hpp"

namespace instance {

    Worldmap::Worldmap(sf::Font* f, sf::RenderWindow* w) : Screen(f,w) {
        background.loadFromFile("../res/mapbackground.png");
        setBackground();
        this->state = state;
    }

    Worldmap::~Worldmap() {}

    void Worldmap::init() {
       //Init node logic
        state::Node* Midgare = new state::Node(0, 150, 450);
        state::Node* Nibelheim = new state::Node(Midgare, 1, 250, 350);
        Midgare->setNextNode(Nibelheim);
        state::Node* Besaid = new state::Node(Nibelheim, 2, 200, 300);
        Nibelheim->setNextNode(Besaid);
        state::Node* Gagazet= new state::Node(Besaid, 3, 100, 150);
        Besaid->setNextNode(Gagazet);
        state::Node* Winhill = new state::Node(Gagazet, 4, 300, 200);
        Gagazet->setNextNode(Winhill);
        state::Node* Terra = new state::Node(Winhill, 5, 550, 280);
        Winhill->setNextNode(Terra);
        state::Node* Kilika = new state::Node(Terra, 6, 650, 350);
        Terra->setNextNode(Kilika);
        state::Node* Lindblum = new state::Node(Kilika, 7, 750, 325);
        Kilika->setNextNode(Lindblum);
        state::Node* Zanarkand = new state::Node(Lindblum, 8, 700, 200);
        Lindblum->setNextNode(Zanarkand);
        state::Node* BITE = new state::Node(Zanarkand, 9, 350, 50);
        Zanarkand->setNextNode(BITE);

        tabNode.push_back(Midgare);
        tabNode.push_back(Nibelheim);
        tabNode.push_back(Besaid);
        tabNode.push_back(Gagazet);
        tabNode.push_back(Winhill);
        tabNode.push_back(Terra);
        tabNode.push_back(Kilika);
        tabNode.push_back(Lindblum);
        tabNode.push_back(Zanarkand);
        tabNode.push_back(BITE);
    }

    void Worldmap::render() {
        int i;

        window->draw(spriteScreen);

        tmap.setFont(*font);
        tmap.setCharacterSize(80);
        tmap.setString("World Map");
        tmap.setPosition({ 400, 150 });
        tmap.setOrigin(tmap.getLocalBounds().width/2, tmap.getLocalBounds().height/2);

        for(i=0;i<10;i++){
            tabNode[i]->setPosition({tabNode[i]->getPositionX(), tabNode[i]->getPositionY()});
            window->draw(*tabNode[i]);
        }

        window->draw(tmap);

    }

    void Worldmap::eventHandler() {

    }
};

#endif
